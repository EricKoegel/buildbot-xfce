---
# This job template builds all of the Xfce Core project in stages
# based on every component's dependencies. Projects that have the
# same common dependencies like garcon-exo-and-tumbler get put in
# the same stage. The individual projects are located in the Xfce
# project grouping in the projects.yml file.
- job-template:
    name: Xfce-Core
    project-type: multijob
    concurrent: true
    triggers:
        - timed: "H */4 * * *"
    builders:
        - multijob:
            name: xfce4-dev-tools
            condition: SUCCESSFUL
            projects:
                - name: xfce4-dev-tools
                  kill-phase-on: FAILURE
                  abort-all-job: true
                  current-parameters: true
        - multijob:
            name: libxfce4util
            condition: SUCCESSFUL
            projects:
                - name: libxfce4util
                  kill-phase-on: FAILURE
                  abort-all-job: true
                  current-parameters: true
        - multijob:
            name: xfconf
            condition: SUCCESSFUL
            projects:
                - name: xfconf
                  kill-phase-on: FAILURE
                  abort-all-job: true
                  current-parameters: true
        - multijob:
            name: libxfce4ui
            condition: SUCCESSFUL
            projects:
                - name: libxfce4ui
                  kill-phase-on: FAILURE
                  abort-all-job: true
                  current-parameters: true
        - multijob:
            name: garcon-exo-and-tumbler
            condition: SUCCESSFUL
            projects:
                - name: garcon
                  kill-phase-on: FAILURE
                  abort-all-job: true
                  current-parameters: true
                - name: exo
                  kill-phase-on: FAILURE
                  abort-all-job: true
                  current-parameters: true
                - name: tumbler
                  kill-phase-on: FAILURE
                  abort-all-job: true
                  current-parameters: true
        - multijob:
            name: thunar
            condition: SUCCESSFUL
            projects:
                - name: thunar
                  kill-phase-on: FAILURE
                  abort-all-job: true
                  current-parameters: true
        - multijob:
            name: xfce-core-others
            condition: ALWAYS
            projects:
                - name: xfdesktop
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-appfinder
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-panel
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-power-manager
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-settings
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfwm4
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-session
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
        - multijob:
            name: xfce-apps
            condition: ALWAYS
            projects:
                - name: gigolo
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: parole
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: ristretto
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-notifyd
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-screenshooter
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-taskmanager
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-terminal
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfdashboard
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: mousepad
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-dict
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfce4-volumed-pulse
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true
                - name: xfmpc
                  kill-phase-on: NEVER
                  abort-all-job: false
                  current-parameters: true

# This project creates the Xfce-Core multijob you see in Jenkins
# from the similarly named Xfce-Core job template above.
- project:
    name: Xfce-Core
    jobs:
      - Xfce-Core
